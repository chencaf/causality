PKG_CPPFLAGS = -DRCAUSALITY -I. -Icausality -I/usr/share/R/include/
PKG_CFLAGS  = -Wall

CAUSALITY.OBJS = causality/ges.o causality/ges_reorient.o \
    causality/ges_utils.o causality/ges_bic_score.o causality/ges_heap.o \
    causality/ges_bdeu_score.o causality/bdeu_score.o causality/score_graph.o \
    causality/bic_score.o causality/linearalgebra.o causality/meek.o \
    causality/sort.o causality/chickering.o causality/pdx.o causality/cgraph.o \
    causality/edge_list.o causality/aggregate_graphs.o causality/tree.o

RCAUSALITY.OBJS = R_causality/R_causality.o R_causality/R_causality_wrappers.o \
    R_causality/R_causality_ges_wrapper.o R_causality/R_causality_aggregate.o \
    R_causality/R_causality_dataframe.o

OBJECTS = $(CAUSALITY.OBJS) $(RCAUSALITY.OBJS)

all: $(SHLIB) clean

$(CAUSALITY.OBJS):
	@(cd causality && $(MAKE) objects \
        CC="$(CC)" CPPFLAGS="$(PKG_CPPFLAGS)" CFLAGS="$(PKG_CFLAGS) $(CFLAGS)" \
        CPICFLAGS="$(CPICFLAGS)")

clean:
	rm -f $(OBJECTS)
