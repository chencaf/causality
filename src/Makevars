PKG_CPPFLAGS = -DCAUSALITY_R
PKG_CFLAGS   = $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS     = $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) \
   $(SHLIB_OPENMP_CFLAGS)

GES.OBJS=ges/ges.o ges/ges_reorient.o ges/ges_utils.o ges/ges_bic_score.o \
    ges/ges_heap.o

SCORE.OBJS=score/bdeu_score.o score/score_graph.o score/bic_score.o  \
    score/linearalg.o

ALG.OBJS=alg/meek.o alg/sort.o alg/chickering.o alg/pdx.o alg/cgraph.o \
    alg/int_ll.o alg/fruchterman_reingold.o

AGG.OBJS=aggregate/aggregate_graphs.o aggregate/int_rbt.o

INTERFACE.OBJS=interface/r_causality.o interface/wrappers.o  \
    interface/ges_wrapper.o


OBJECTS= $(GES.OBJS) $(SCORE.OBJS) $(ALG.OBJS) $(AGG.OBJS) \
    $(INTERFACE.OBJS)

all: $(SHLIB) clean

score/linearalg.o:
	@(cd score && $(MAKE) linearalg.o \
        CC="$(CC)" CPPFLAGS="$(PKG_CPPFLAGS)" CFLAGS="$(CPICFLAGS)")

clean:
	rm -f $(OBJECTS)
